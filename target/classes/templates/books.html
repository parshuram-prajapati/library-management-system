<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head}">
  <meta charset="utf-8">
  <title>Books Inventory</title>
</head>

<style>
  :root { --theme-green: #28c76f; }

  .btn-success {
    background-color: var(--theme-green);
    border-color: var(--theme-green);
  }

  .badge-avail {
    background-color: #dcf6e8;
    color: #28c76f;
  }

  .custom-table th {
    font-size: 0.75rem;
    text-transform: uppercase;
    font-weight: 600;
  }

  .custom-table tr:hover td {
    background-color: #fafafc;
    color: var(--theme-green);
  }

  .bg-light-gray { background-color: #f8f8f8; }
</style>

<body>
<div class="d-flex w-100 h-100 bg-light-gray">

  <!-- SIDEBAR -->
  <aside th:replace="~{layout :: sidebar(page='books')}"></aside>

  <!-- MAIN -->
  <main class="flex-grow-1 main-content-wrapper overflow-auto">

    <!-- HEADER -->
    <header class="p-3 bg-white border-bottom sticky-top">
      <div class="container-fluid d-flex justify-content-between align-items-center">

        <!-- âœ… SEARCH BAR -->
        <div class="input-group bg-light rounded-pill" style="max-width: 350px;">
          <span class="input-group-text bg-transparent border-0">
            <i class="bi bi-search"></i>
          </span>
          <input type="text"
                 id="searchInput"
                 class="form-control bg-transparent border-0"
                 placeholder="Search by title, author or ID">
        </div>

        <button class="btn btn-success rounded-pill px-4"
                data-bs-toggle="modal"
                data-bs-target="#addBookModal">
          + Add Book
        </button>
      </div>
    </header>

    <div class="container-fluid px-4 py-4">

      <!-- BOOK TABLE -->
      <div class="card shadow-sm">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover align-middle custom-table mb-0">
              <thead class="bg-light">
              <tr>
                <th class="ps-4">Book ID</th>
                <th>Title</th>
                <th>Author</th>
                <th>Status</th>
                <th class="text-end pe-4">Action</th>
              </tr>
              </thead>

              <tbody id="booksGrid">
              <tr>
                <td colspan="5" class="text-center py-4 text-muted">
                  Loading books...
                </td>
              </tr>
              </tbody>

            </table>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>

<!-- ADD BOOK MODAL -->
<div class="modal fade" id="addBookModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5>Add New Book</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="addBookForm">
          <input name="id" class="form-control mb-2" placeholder="Book ID" required>
          <input name="title" class="form-control mb-2" placeholder="Title" required>
          <input name="author" class="form-control mb-3" placeholder="Author">
          <button class="btn btn-success w-100">Add Book</button>
          <div id="bookFormMsg" class="small text-center mt-2"></div>
        </form>
      </div>
    </div>
  </div>
</div>

<script th:replace="~{layout :: scripts}"></script>
<script src="/js/books.js"></script>
</body>
</html>
