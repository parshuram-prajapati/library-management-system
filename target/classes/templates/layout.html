<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- 1. HEAD FRAGMENT -->
<head th:fragment="head">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Library App</title>
  
  <!-- Bootstrap 5 & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  
  <!-- Google Font: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* GLOBAL THEME VARIABLES */
    :root { 
      --theme-green: #19a05b; 
      --bs-font-sans-serif: 'Inter', sans-serif; 
    }
    
    body { 
      background-color: #f8f8f8; 
      color: #5e5873; 
      font-family: var(--bs-font-sans-serif); 
    }

    /* SIDEBAR STYLES (Fixed Position) */
    .sidebar-container { 
      width: 260px; 
      height: 100vh; 
      position: fixed; 
      top: 0; 
      left: 0; 
      z-index: 100;
      background-color: white;
      border-right: 1px solid #ebe9f1;
    }

    /* CONTENT WRAPPER */
    .main-content-wrapper { 
      margin-left: 260px; 
      width: calc(100% - 260px);
      min-height: 100vh;
      background-color: #f8f8f8;
    }

    /* NAV LINKS */
    .nav-link { 
        color: #6e6b7b; 
        font-weight: 500; 
        padding: 12px 18px; 
        transition: all 0.2s; 
        margin-bottom: 6px;
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 0.95rem;
    }
    
    .nav-link:hover { 
      color: var(--theme-green); 
      transform: translateX(4px); 
    }
    
    /* ACTIVE STATE */
    .nav-link.active-green {
      background: linear-gradient(118deg, #28c76f, #48da89);
      color: white !important;
      box-shadow: 0 4px 15px 0 rgba(40, 199, 111, 0.4);
      border-radius: 4px;
    }
    
    .nav-link.active-green i {
      color: white !important;
    }

    .text-theme { color: var(--theme-green) !important; }
    .bg-light-gray { background-color: #f8f8f8; }
  </style>
</head>

<body>

  <!-- 2. SIDEBAR FRAGMENT -->
  <aside th:fragment="sidebar(page)" class="d-flex flex-column flex-shrink-0 p-3 sidebar-container">
    
    <!-- Logo -->
    <a href="/" class="d-flex align-items-center mb-4 text-dark text-decoration-none px-2 mt-2">
      <i class="bi bi-layers-fill fs-3 me-2 text-theme"></i>
      <span class="fs-6 fw-bold" style="letter-spacing: -0.5px;">Library Management</span>
    </a>
    
    <!-- Links -->
    <ul class="nav nav-pills flex-column mb-auto mt-2">
      
      <li>
        <a href="/dashboard" class="nav-link" 
           th:classappend="${page == 'dashboard'} ? 'active-green' : ''">
          <i class="bi bi-grid-fill"></i> Dashboard
        </a>
      </li>

      <li>
        <a href="/students" class="nav-link" 
           th:classappend="${page == 'students'} ? 'active-green' : ''">
          <i class="bi bi-people-fill"></i> Members
        </a>
      </li>

      <li>
        <a href="/books" class="nav-link" 
           th:classappend="${page == 'books'} ? 'active-green' : ''">
          <i class="bi bi-book-half"></i> Books
        </a>
      </li>

      <li>
        <a href="/issue" class="nav-link" 
           th:classappend="${page == 'issue'} ? 'active-green' : ''">
          <i class="bi bi-arrow-left-right"></i> Check-out
        </a>
      </li>
      
      <!-- HISTORY & SETTINGS LINKS REMOVED HERE -->

    </ul>
    
    <!-- Bottom Items (Just Logout) -->
    <div class="mt-auto px-2 mb-3">
      <a href="/" class="nav-link text-danger mt-1">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </div>
  </aside>

  <!-- 3. SCRIPTS FRAGMENT -->
  <div th:fragment="scripts">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  </div>

</body>
</html>